<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>Expert 프로모션</title>
<style>
:root{
  --maxW: 720px;
  --sideGap: 20px;
  --mainBtnH: 0px;   /* 메인(보라) 고정 버튼 없음 */
  --bottomInset: 0px;/* 하단 고정바(타이머 등) 높이 자동 반영 */
}
html, body { margin:0; padding:0; overflow-x:hidden; width:100%; }
body{
background:#06160f;
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic",Arial,sans-serif;
  -webkit-font-smoothing:antialiased;
  overscroll-behavior-x: none;
  touch-action: pan-y;
}

.wrap{max-width:768px;margin:0 auto;position:relative;}
.wrap, main.wrap{overflow-x:hidden;}
html{scroll-behavior:smooth;}
::-webkit-scrollbar{width:0;height:0;}

section.block{position:relative;width:100%;margin:0;scroll-margin-top:16px;scroll-margin-bottom:90px;}
section.block img{display:block;width:100%;height:auto;user-select:none;-webkit-user-drag:none;}

/* ===== S3 버튼(정밀 좌표) ===== */
.btn-overlay{
  position:absolute;
  left:var(--x);
  top:var(--y);
  width:var(--w);
  height:var(--h);
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:999px;
  background:rgba(20,20,20,0.7);
  border:1.5px solid #ffffff;
  color:#ffffff;
  font-weight:800;
  font-size:clamp(17px, 4.4vw, 18px);
  text-decoration:none;
  backdrop-filter:blur(2px);
  -webkit-backdrop-filter:blur(2px);
  transform-origin:center center;
  transform: translate3d(0,0,0) scaleX(0.92) scaleY(0.86);
  transition:transform .18s ease, background .18s ease, opacity .18s ease;
  -webkit-tap-highlight-color: transparent;
  line-height:1;
  white-space:nowrap;
  cursor: pointer; /* 버튼 형태이므로 커서 추가 */
}
.btn-overlay:active{
  transform: translate3d(0,0,0) scaleX(0.90) scaleY(0.83);
  background:rgba(20,20,20,0.85);
}

/* ✅ 버튼 샤인 애니메이션 */
.btn-overlay{
  overflow:hidden;
  isolation:isolate;
  -webkit-mask-image: -webkit-radial-gradient(white, black);
}

.btn-overlay::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius: inherit;
  pointer-events:none;
  background: linear-gradient(120deg,
    rgba(0,0,0,0) 0%,
    rgba(76,255,200,0.00) 42%,
    rgba(76,255,200,0.30) 50%,
    rgba(76,255,200,0.00) 58%,
    rgba(0,0,0,0) 100%);
  background-size: 240% 100%;
  background-position: 0% 0%;
  opacity: 0;
  filter: blur(0.2px);
  animation: sheenBG 2.6s linear infinite;
}

@keyframes sheenBG{
  0%   { background-position: 140% 0%; opacity: 0; }
  8%   { opacity: 0; }
  18%  { opacity: 0.95; }
  60%  { background-position: -40% 0%; opacity: 0.95; }
  75%  { opacity: 0; }
  100% { background-position: -40% 0%; opacity: 0; }
}

@media (prefers-reduced-motion: reduce){
  .btn-overlay::before{ animation:none; opacity:0.18; background-position:50% 0%; }
}

/* ===== 카톡 퀵메뉴 & 타이머 스타일 (생략 없이 유지) ===== */
.countdown-bar{
  position:fixed; left:50%; transform:translateX(-50%); bottom:0; width:100%; max-width:720px;
  background:rgba(0,0,0,0.75); backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px);
  color:#e5e5e5; padding:14px 12px calc(14px + env(safe-area-inset-bottom));
  text-align:center; font-weight:600; font-size:16px; z-index:9998;
}
.countdown-time{ font-size:28px; font-weight:900; margin-left:8px; color:#4cffc8; }
.cd-num{ font-size: 30px; font-weight:900; color:inherit; }
.cd-unit{ font-size:16px; font-weight:400; margin-right:2px; color:#bdbdbd; }

.kakao-quick{
  position: fixed; right: 16px; bottom: calc(var(--bottomInset, 0px) + 16px + env(safe-area-inset-bottom));
  z-index: 9999; width: 72px; height: 96px; border-radius: 999px;
  background: rgba(255,255,255,0.98); border: 1px solid rgba(0,0,0,0.08);
  box-shadow: 0 18px 40px rgba(0,0,0,0.18), 0 2px 8px rgba(0,0,0,0.10);
  display: flex; align-items: center; justify-content: center; text-decoration: none;
  -webkit-tap-highlight-color: transparent; transition: transform 420ms cubic-bezier(.2,.8,.2,1), opacity 420ms cubic-bezier(.2,.8,.2,1);
}
.kakao-quick.is-hidden{ opacity: 0; transform: translate3d(0, 22px, 0) scale(0.98); pointer-events: none; }
.kakao-quick__inner{ display:flex; flex-direction: column; align-items: center; gap: 8px; }
.kakao-quick__icon{ width: 46px; height: 46px; border-radius: 50%; display: grid; place-items: center; background: #FEE500; }
.kakao-quick__label{ font-size: 14px; font-weight: 900; color: #111; }

/* 이미지 보호 등 기타 스타일 유지 */
body{ -webkit-user-select: none; user-select: none; }
img{ -webkit-user-drag: none; -webkit-touch-callout: none; pointer-events: none; }
.hotspot-s2-to-s3{ position:absolute; left:5.33%; top:37.81%; width:89.07%; height:57.61%; display:block; z-index:10; }
.card-sheen{ position:absolute; pointer-events:none; overflow:hidden; border-radius:16px; }
</style>
</head>
<body>
<main class="wrap">

<section class="block" id="s1"><img alt="s1" src="assets/section1.png" /></section>
<section class="block" id="s2">
  <img alt="s2" src="assets/section2.png" />
  <div class="card-sheen" style="left:12.0%; top:33.0%; width:75.7%; height:15.9%;"></div>
  <a class="hotspot-s2-to-s3" href="javascript:void(0);" data-scroll-to="s3" aria-label="나의 엑스퍼트 찾기 영역: 엑스퍼트 선택 섹션으로 이동"></a>
</section>

<section class="block" id="s3">
  <img alt="s3" src="assets/section3.png" />

  <a class="btn-overlay" href="javascript:void(0);" onclick="join('expert01', 'rc_st.am1d5_e1')" style="--x:8.533%;--y:21.693%;--w:42.667%;--h:3.028%; pointer-events: auto;">평생 반값 혜택받기</a>
  <a class="btn-overlay" href="javascript:void(0);" onclick="join('dsuk10', 'rc_st.am1d5_e2')" style="--x:8.533%;--y:37.824%;--w:42.667%;--h:3.028%; pointer-events: auto;">평생 반값 혜택받기</a>
  <a class="btn-overlay" href="javascript:void(0);" onclick="join('alphaquant', 'rc_st.am1d5_e3')" style="--x:8.533%;--y:53.894%;--w:42.667%;--h:3.028%; pointer-events: auto;">평생 반값 혜택받기</a>
  <a class="btn-overlay" href="javascript:void(0);" onclick="join('smartmoney', 'rc_st.am1d5_e4')" style="--x:8.533%;--y:69.963%;--w:42.667%;--h:3.028%; pointer-events: auto;">평생 반값 혜택받기</a>
  <a class="btn-overlay" href="javascript:void(0);" onclick="join('0000336255@nv', 'rc_st.am1d5_e5')" style="--x:8.533%;--y:86.032%;--w:42.667%;--h:3.028%; pointer-events: auto;">평생 반값 혜택받기</a>
</section>

<section class="block" id="s4"><img alt="s4" src="assets/section4.png" /></section>
<section class="block" id="s5"><img alt="s5" src="assets/section5.png" /></section>
<section class="block" id="footer"><img alt="footer" src="assets/footer.png" /></section>

</main>

<div class="countdown-bar">
  이벤트 마감까지
  <span id="countdown" class="countdown-time">--일 --시간 --분 --초</span>
</div>

<a class="kakao-quick" href="https://pf.kakao.com/_swxiLxb/chat" target="_blank" rel="noopener">
  <span class="kakao-quick__inner">
    <span class="kakao-quick__icon">
      <svg viewBox="0 0 24 24" fill="none"><path d="M12 4.2c-4.6 0-8.3 2.9-8.3 6.5 0 2.3 1.5 4.3 3.8 5.4l-.8 3.2c-.1.4.3.8.7.6l3.8-2.1c.3 0 .5.1.8.1 4.6 0 8.3-2.9 8.3-6.5S16.6 4.2 12 4.2Z" fill="#111"/></svg>
    </span>
    <span class="kakao-quick__label">카톡상담</span>
  </span>
</a>

<script>
  /**
   * ✅ Flutter InAppWebView 핸들러 호출 함수
   */
  function join(expertId, productId) {
    console.log('expertId:::::::' + expertId);
    console.log('productId:::::::' + productId);
    
    if (window.flutter_inappwebview && window.flutter_inappwebview.callHandler) {
      window.flutter_inappwebview.callHandler(
        "thinkpool_webview_handler", 
        "webToApp_goLandingPageExp", 
        {
          expertId: expertId, 
          productId: productId, 
          landingPage: "LPTP" 
        }
      );
    } else {
      console.warn("Flutter handler not found.");
    }
  }

  document.addEventListener("DOMContentLoaded", function(){
    // 1. 카운트다운 로직
    const el = document.getElementById("countdown");
    const end = new Date("2026-02-27T23:59:59+09:00").getTime();
    function pad(n){ return String(n).padStart(2,"0"); }
    function updateCountdown(){
      const now = Date.now();
      let diff = end - now;
      if(diff <= 0){ el.textContent = "종료됨"; return; }
      const d = Math.floor(diff / (1000*60*60*24));
      const h = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
      const m = Math.floor((diff % (1000*60*60)) / (1000*60));
      const s = Math.floor((diff % (1000*60)) / 1000);
      el.innerHTML = `<span class="cd-num">${d}</span><span class="cd-unit">일</span> <span class="cd-num">${pad(h)}</span><span class="cd-unit">시간</span> <span class="cd-num">${pad(m)}</span><span class="cd-unit">분</span> <span class="cd-num">${pad(s)}</span><span class="cd-unit">초</span>`;
    }
    setInterval(updateCountdown, 1000); updateCountdown();

    // 2. 스무스 스크롤
    document.addEventListener("click", function(e){
      const a = e.target.closest("[data-scroll-to]");
      if(!a) return;
      const t = document.getElementById(a.getAttribute("data-scroll-to"));
      if(t) t.scrollIntoView({ behavior: "smooth" });
    });

    // 3. 하단 바 높이 계산
    const applyInset = () => {
      const h = document.querySelector('.countdown-bar')?.getBoundingClientRect().height || 0;
      document.documentElement.style.setProperty('--bottomInset', h + 'px');
    };
    window.addEventListener('resize', applyInset); applyInset();
  });

  // 카톡 버튼 스크롤 제어
  (function(){
    const btn = document.querySelector('.kakao-quick');
    let lastST = 0;
    window.addEventListener('scroll', () => {
      const st = window.scrollY;
      if (st > lastST && st > 50) btn.classList.add('is-hidden');
      else btn.classList.remove('is-hidden');
      lastST = st;
    }, {passive:true});
  })();
</script>

</body>
</html>
